#! /bin/env cmsRun
process testtag = { 
  source = PoolSource {
    untracked vstring fileNames = { 
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_1.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_2.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_3.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_4.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_5.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_6.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_7.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_8.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_9.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_10.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_11.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_12.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_13.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_14.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_15.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_16.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_17.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_18.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_19.root',
      'rfio:/castor/cern.ch/user/a/azabi/EFLOW/TAU/CMSSW131/singletau_pf_20.root'
    }
    #untracked int32 maxEvents = -1
    untracked int32 maxEvents = 1000
  }
    
  # Message Logger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cout.threshold = "ERROR"

  # Magnetic Field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
   
  # Geometry
  #include "Geometry/CommonDetUnit/data/globalTrackingGeometry.cfi"
  #include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
  #include "Geometry/CaloEventSetup/data/CaloTopology.cfi"

  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cfi" 
  include "RecoTracker/TrackProducer/data/RefitterWithMaterial.cfi"
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"
  include "TrackingTools/GsfTracking/data/GsfElectronFit.cfi"
  
  include "RecoVertex/PrimaryVertexProducer/data/OfflinePrimaryVerticesFromCTFTracks.cfi"

  include "RecoParticleFlow/PFClusterProducer/data/particleFlowCluster.cff"
  include "RecoParticleFlow/PFTracking/data/particleFlowTrack.cff"
  include "RecoParticleFlow/PFTracking/data/elecPreId.cff"
  include "RecoParticleFlow/PFBlockProducer/data/particleFlowSimParticle.cff"
  include "RecoParticleFlow/PFBlockProducer/data/particleFlowBlock.cff"
  include "RecoParticleFlow/PFProducer/data/particleFlow.cff"
  include "RecoParticleFlow/PFProducer/data/particleFlowJetCandidates.cfi"
  
  module myPFConeIsolation=PFConeIsolation{
    string PFJetmodule        = "iterativeCone5PFJets"
    double PFJetConeSize      = 0.5       # temporary parameter
    string PFCandidatemodule  = "particleFlow"
    # parameters of the considered charged hadr. cand.'s, based on their rec. tk properties :
    double ChargedHadrCand_tkminPt            = 1.
    int32 ChargedHadrCand_tkminPixelHitsn     = 2
    int32 ChargedHadrCand_tkminTrackerHitsn   = 8
    double ChargedHadrCand_tkmaxipt           = 0.03
    double ChargedHadrCand_tkmaxChi2          = 100.
    double ChargedHadrCand_tktorefpointDZ     = 0.2
    # parameters of the considered neutral hadr. cand.'s, based on their rec. HCAL clus. properties : 
    double NeutrHadrCand_HcalclusminE         = 1.
    # parameters of the considered gamma cand.'s, based on their rec. ECAL clus. properties :
    double GammaCand_EcalclusminE             = 1.
    # 
    bool UsePVconstraint                      = false
    string PVmodule                           = "pixelVertices"
    #string PVmodule                           = "offlinePrimaryVerticesFromCTFTracks"
    double smearedPVsigmaX                    = 0.0015
    double smearedPVsigmaY                    = 0.0015
    double smearedPVsigmaZ                    = 0.0050   
    bool UseOnlyChargedHadrCand               = true
    double Cand_minPt                         = 1.
    double MatchingConeSize                   = 0.1
    double SignalConeSize                     = 0.07
    double IsolConeSize                       = 0.45
    bool UseOnlyChargedHadr_for_LeadCand      = true
    double LeadCand_minPt                     = 6.
    int32 IsolRing_Candsn                     = 0 
    bool UseSignalConeVariableSize            = false
    double SignalConeVariableSize_Parameter   = 3.5
    double SignalConeVariableSize_max         = 0.17
    double SignalConeVariableSize_min         = 0.05
  }

  module myPFTauTagTest=PFTauTagTest{
    string PFIsolatedTauTagProd = "myPFConeIsolation"
  }

  #module execution
  path p={ctfWithMaterialTracks,particleFlowCluster,particleFlowTrack,particleFlowSimParticle,particleFlowBlock,particleFlow,particleFlowJetCandidates,iterativeCone5PFJets,myPFConeIsolation,myPFTauTagTest}
  #path p={globalMixedSeeds,ckfTrackCandidates,ctfWithMaterialTracks,particleFlowCluster,particleFlowTrack,particleFlowSimParticle,particleFlowBlock,particleFlow,particleFlowJetCandidates,iterativeCone5PFJets,myPFConeIsolation,myPFTauTagTest}
}
